<mat-drawer-container class="example-container" autosize>
    <mat-drawer #drawer opened class="example-sidenav" mode="side" position="end">
        <div style="width:300px" class="p">
            <div class="ingredients-container">
                <h2>BUSCADOR DE INGREDIENTES</h2>
                <div class="flex-column">
                    <mat-form-field class="example-form-field" appearance="fill">
                        <mat-label>Buscador de ingredientes lomi</mat-label>
                        <input (keypress)="searchProducts()" matInput type="text" [(ngModel)]="keyword">
                        <button *ngIf="keyword" matSuffix mat-icon-button aria-label="Clear" (click)="keyword=''">
                          <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                    <div *ngFor="let product of products.data"> 
                        <mat-card class="hoverable" (click)="addIngredient(product)">
                            <p>{{product.attributes.name}}      </p>
                        </mat-card>
                    </div>
                </div>
            </div>
        </div>
    </mat-drawer>
  
    <div class="example-sidenav-content p" style="height: 100vh;">
        <div class="content" style="padding-right:2em">

            <!-- Titulo -->

            <ng-container *ngIf="lomiBox.title"> 
                <div style="width:100%;display: flex;justify-content: space-between;">
                    <div class="flex-column">
                        <div class="flex-row">
                            <h1 style="margin:0"><b>{{lomiBox.title}}</b></h1>
                        </div>
                    </div>
                    <button mat-button (click)="lomiBox.title = ''" color="primary" aria-label="Example icon button with a delete icon">
                        Editar titulo <mat-icon >edit</mat-icon>
                      </button>
                </div>
                <div class="divider"></div>
            </ng-container>

            <div *ngIf="!lomiBox.title" class="flex-column">
                <div class="flex-row">
                    <mat-form-field class="example-form-field" appearance="fill">
                        <mat-label>Titulo</mat-label>
                        <input (keydown.enter)="setTitle($event)" matInput type="text" >
                        <button *ngIf="lomiBox.title" matSuffix mat-icon-button aria-label="Clear" (click)="keyword=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>

            <!-- Fin del titulo -->
    
            <h1>Ingredientes</h1>
                <div class="ingredients-list">
                    <div *ngFor="let ingredient of lomiBox.ingredients">
                        <div class="ingredient">
                            <mat-form-field>
                                <mat-label>Cantidad</mat-label>
                                <input (change)="updateDocument()" matInput [(ngModel)]="ingredient.quantity" type="number">
                            </mat-form-field>
                            <h6>-</h6>
                            <p>{{ingredient.attributes.name}}</p>
                            <mat-icon (click)="deleteIngredient(ingredient)" >delete</mat-icon>
                        </div>
                    </div>
                </div>
            <div class="divider"></div>

            <h2><b>IMAGENES</b></h2>
            <div class="firestore-images">
                <ng-container *ngIf="lomiBox.images">
                    <img class="mini-image" *ngFor="let image of lomiBox.images" [src]="image">
                </ng-container>
    
                <div (fileDropped)="onImageDropped($event)" drag-n-drop class="drag-n-drop">
                    <img src="assets/images/image-upload.png" (click)="fileUpload.click()">
                    <input style="position: absolute;opacity: 0;" (change)="onImageDropped($event)" #fileUpload type="file">
                </div>
            </div>
            <div class="divider"></div>
    
            

            <div style="width:100%;display: flex;justify-content: space-between;">
                <h2 style="margin:0 0 16px 0"><b>LOMI RECETA</b></h2>
                <button mat-button (click)="updateDocument();editingDescription = !editingDescription" color="primary" aria-label="Example icon button with a delete icon">
                    {{ !editingDescription ? 'Editar receta' : 'Finalizar edici√≥n' }} <mat-icon >edit</mat-icon>
                  </button>
            </div>
            <div *ngIf="!editingDescription" class="flex-column">
                <div class="flex-row">
                    <span [innerHtml]="lomiBox.description"></span>
                </div>
            </div>
            <div *ngIf="editingDescription" class="flex-column">
                <div style="height:300px;padding-bottom: 112px;">
                    <quill-editor [(ngModel)]="lomiBox.description" ></quill-editor>
                </div>
            </div>
            <div class="divider"></div>
           
        </div>
    </div>
  </mat-drawer-container>

