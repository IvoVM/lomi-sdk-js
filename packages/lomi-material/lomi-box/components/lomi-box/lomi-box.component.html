<mat-drawer-container class="example-container" autosize>
    <mat-drawer #drawer opened class="example-sidenav" mode="side" position="end">
        <div style="width:300px" class="p">
            <div class="ingredients-container">
                <h2>BUSCADOR DE INGREDIENTES</h2>
                <div class="flex-column">
                    <mat-form-field class="example-form-field" appearance="outline">
                        <mat-label>Buscador de ingredientes lomi</mat-label>
                        <input (keypress)="searchProducts()" matInput type="text" [(ngModel)]="keyword">
                        <button *ngIf="keyword" matSuffix mat-icon-button aria-label="Clear" (click)="keyword=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                    <div *ngFor="let product of products.data">
                        <mat-card class="hoverable" (click)="addIngredient(product)">
                            <p>{{product.attributes.name}}</p>
                        </mat-card>
                    </div>
                </div>
            </div>
        </div>
    </mat-drawer>

    <div class="example-sidenav-content p" style="height: 100vh;">
        <div class="content" style="padding-right:2em">
            
            <form [formGroup]="lomiBoxForm" (submit)="createBox()" class="flex-column">
                <div class="flex-row">
                    <mat-form-field class="example-form-field" appearance="outline">
                        <mat-label>Titulo</mat-label>
                        <input formControlName="title" matInput type="text">
                    </mat-form-field>
                </div>
                <div class="divider"></div>
                <div class="flex-row">
                    <mat-form-field class="example-form-field" appearance="outline">
                        <mat-label>Unidad</mat-label>
                        <input formControlName="option_text" matInput type="text">
                    </mat-form-field>
                </div>
                <div class="divider"></div>
                <div class="flex-row">
                    <mat-form-field appearance="outline">
                        <mat-label>Categoria</mat-label>
                        <mat-select formControlName="category">
                            <mat-option value="frutasVerduras">Frutas y Verduras</mat-option>
                            <mat-option value="bebidas">Bebidas</mat-option>
                            <mat-option value="junta">Juntas</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="divider"></div>
            </form>

            <h1><b>Productos</b></h1>
            <div class="ingredients-list">
                <div *ngFor="let product of ingredients">
                    <div class="ingredient">
                        <mat-form-field>
                            <mat-label>Cantidad</mat-label>
                            <input  matInput  type="number">
                        </mat-form-field>
                        <h6>-</h6>
                        <p>{{product.attributes.name}}</p>
                        <mat-icon (click)="deleteIngredient(product)">delete</mat-icon>
                    </div>
                </div>
            </div>
        </div>

        <div style="display: flex;">
            <button *ngIf="!isNew" (click)="deleteItem()" style="width: 100%; margin: 0 12px; background-color: #eb445a;" mat-raised-button mat-button >
                Eliminar Receta
            </button>
            <button *ngIf="!isNew" (click)="updateBox()" style="width: 100%; margin: 0 12px;" mat-raised-button mat-button color="primary">Editar Receta</button>
            <button *ngIf="isNew" [disabled]="!this.lomiBoxForm.valid && this.ingredients.length <= 0" (click)="createBox()" style="width: 100%; margin: 0 12px;" mat-raised-button mat-button color="primary">Crear Receta</button>
        </div>
    </div>


</mat-drawer-container>

