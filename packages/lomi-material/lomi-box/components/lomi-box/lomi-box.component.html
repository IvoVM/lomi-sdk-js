<mat-drawer-container class="example-container" autosize>
    <mat-drawer #drawer opened class="example-sidenav" mode="side" position="end">
        <div style="width:300px" class="p">
            <div class="ingredients-container">
                <h2>BUSCADOR DE INGREDIENTES</h2>
                <div class="flex-column">
                    <mat-form-field class="example-form-field" appearance="fill">
                        <mat-label>Buscador de ingredientes lomi</mat-label>
                        <input (keypress)="searchProducts()" matInput type="text" [(ngModel)]="keyword">
                        <button *ngIf="keyword" matSuffix mat-icon-button aria-label="Clear" (click)="keyword=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                    <div *ngFor="let product of products.data">
                        <mat-card class="hoverable" (click)="addIngredient(product)">
                            <p>{{product.attributes.name}}</p>
                        </mat-card>
                    </div>
                </div>
            </div>
        </div>
    </mat-drawer>

    <div class="example-sidenav-content p" style="height: 100vh;">
        <div class="content" style="padding-right:2em">

            <!-- Titulo -->

            <ng-container *ngIf="lomiBox.title">
                <div style="width:100%;display: flex;justify-content: space-between;">
                    <div class="flex-column">
                        <div class="flex-row">
                            <h1 style="margin:0"><b>{{lomiBox.title}}</b></h1>
                        </div>
                    </div>
                    <button mat-button (click)="lomiBox.title = ''" color="primary"
                        aria-label="Example icon button with a delete icon">
                        Editar titulo <mat-icon>edit</mat-icon>
                    </button>
                </div>
                <div class="divider"></div>
            </ng-container>

            <div *ngIf="!lomiBox.title" class="flex-column">
                <div class="flex-row">
                    <mat-form-field class="example-form-field" appearance="fill">
                        <mat-label>Titulo</mat-label>
                        <input (keydown.enter)="setTitle($event)" matInput type="text">
                        <button *ngIf="lomiBox.title" matSuffix mat-icon-button aria-label="Clear" (click)="keyword=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>

            <!-- Fin del titulo -->

            <h1>Productos</h1>
            <div class="ingredients-list">
                <div *ngFor="let product of lomiBox.products">
                    <div class="ingredient">
                        <mat-form-field>
                            <mat-label>Cantidad</mat-label>
                            <input (change)="updateDocument()" matInput [(ngModel)]="product.quantity" type="number">
                        </mat-form-field>
                        <h6>-</h6>
                        <p>{{product.attributes.name}}</p>
                        <mat-icon (click)="deleteIngredient(product)">delete</mat-icon>
                    </div>
                </div>
            </div>
            <div class="divider"></div>

            <!-- <h2><b>IMAGENES</b></h2>
            <div class="firestore-images">
                <ng-container *ngIf="lomiBox.images">
                    <img class="mini-image" *ngFor="let image of lomiBox.images" [src]="image">
                </ng-container>
    
                <div (fileDropped)="onImageDropped($event)" drag-n-drop class="drag-n-drop">
                    <img src="assets/images/image-upload.png" (click)="fileUpload.click()">
                    <input style="position: absolute;opacity: 0;" (change)="onImageDropped($event)" #fileUpload type="file">
                </div>
            </div>
            <div class="divider"></div> -->


            <!-- Option Text -->

            <ng-container *ngIf="lomiBox.option_text">
                <div style="width:100%;display: flex;justify-content: space-between;">
                    <div class="flex-column">
                        <div class="flex-row">
                            <h1 style="margin:0"><b>{{lomiBox.option_text}}</b></h1>
                        </div>
                    </div>
                    <button mat-button (click)="lomiBox.option_text = ''" color="primary"
                        aria-label="Example icon button with a delete icon">
                        Editar Option Text <mat-icon>edit</mat-icon>
                    </button>
                </div>
                <div class="divider"></div>
            </ng-container>

            <div *ngIf="!lomiBox.option_text" class="flex-column">
                <div class="flex-row">
                    <mat-form-field class="example-form-field" appearance="fill">
                        <mat-label>Option text</mat-label>
                        <input (keydown.enter)="setOptionText($event)" matInput type="text">
                        <button *ngIf="lomiBox.option_text" matSuffix mat-icon-button aria-label="Clear"
                            (click)="keyword=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>

            <!-- Fin del Option Text -->

            <!-- Option Text -->

            <ng-container *ngIf="lomiBox.category">
                <div style="width:100%;display: flex;justify-content: space-between;">
                    <div class="flex-column">
                        <div class="flex-row">
                            <h1 style="margin:0"><b>{{lomiBox.category}}</b></h1>
                        </div>
                    </div>
                    <button mat-button (click)="lomiBox.category = ''" color="primary"
                        aria-label="Example icon button with a delete icon">
                        Editar Categoria <mat-icon>edit</mat-icon>
                    </button>
                </div>
                <div class="divider"></div>
            </ng-container>

            <div *ngIf="!lomiBox.category" class="flex-column">
                <div class="flex-row">
                    <mat-form-field class="example-form-field" appearance="fill">
                        <mat-label>Categoria</mat-label>
                        <input (keydown.enter)="setCategory($event)" matInput type="text">
                        <button *ngIf="lomiBox.category" matSuffix mat-icon-button aria-label="Clear"
                            (click)="keyword=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>

            <!-- Fin del Option Text -->


        </div>
    </div>
</mat-drawer-container>