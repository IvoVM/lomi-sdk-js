
<mat-drawer-container class="example-container" autosize>

    <mat-drawer #drawer class="actions-sidenav" mode="side" style="width:300px" position="end">
    </mat-drawer>


    <div class="example-sidenav-content p">
        <div style="display:flex;flex-direction: row;align-items: flex-end;justify-content: space-between;margin: 1em 0;">
            <h1 style="margin:0 !important"><b>Usuarios </b></h1>
        </div>

        <div class="half-card shadow" style="padding: 0.5em 1em;overflow: scroll;">
            
        <table mat-table [dataSource]="users" multiTemplateDataRow>
            <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef> Correo </th>
                <td mat-cell *matCellDef="let user"> {{user.email}} </td>
            </ng-container>

            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> ID </th>
                <td mat-cell *matCellDef="let user" > {{user.id}} </td>
            </ng-container>
            
            <ng-container matColumnDef="rol">
                <th mat-header-cell *matHeaderCellDef> Rol </th>
                <td mat-cell *matCellDef="let user" > {{user.userRol ? getRolName(user.userRol) : 'Rol sin asignar'}} </td>
            </ng-container>

            <ng-container matColumnDef="expandedDetail">
                <th mat-header-cel *matHeaderCellDef class="hidden-header">Expanded</th>
                <td (click)="preventDefault($event)" mat-cell *matCellDef="let element" class="{{expandedElement && element === expandedElement ? 'expanded-column' : 'hidden'}}">
                  <div class="example-element-detail" *ngIf="expandedElement && element === expandedElement"
                       >
                    <div class="user-detail">
                        <div > {{element.email}} </div>
                        <div > 
                            <mat-form-field>
                                <mat-select [ngModel]="element.userRol">
                                    <mat-option matInput *ngFor="let rol of rols" (click)="updateRol(rol.id, element)" [value]="rol.id">
                                        {{rol.rolName}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                  </div>
                </td>
              </ng-container>
            
            <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
            <tr style="position: relative;" mat-row *matRowDef="let element; columns: columnsToDisplay;when !elementExpanded"
                class="example-element-row"
                [class.example-expanded-row]="expandedElement === element"
                (click)="toggleElement(element)">
            </tr>
        </table>
        </div>
    </div>

</mat-drawer-container>