<table mat-table [dataSource]="state ? componentOrders : ordersProvider.orders" style="width: 100%;">
    <ng-container [matColumnDef]="'number'">
        <th mat-header-cell *matHeaderCellDef> Nº Orden </th>
        <td mat-cell *matCellDef="let order" [routerLink]="['/orders/'+order.number]" class="hoverable"> {{order.number}} </td>
    </ng-container>

    <ng-container [matColumnDef]="'actions'">
        <th mat-header-cell *matHeaderCellDef> Nº Orden </th>
        <td mat-cell *matCellDef="let order"  > 
            <button mat-mini-fab *ngIf="ordersProvider.stateName(order.state) == ordersProvider.states[0]" color="primary" aria-label="Example icon button with a menu icon">
                <mat-icon>skip_next</mat-icon>
            </button> 
            <button (click)="pickOrder(order)" mat-mini-fab *ngIf="ordersProvider.stateName(order.state) == ordersProvider.states[1]" color="primary" aria-label="Example icon button with a menu icon">
                <mat-icon>checklist</mat-icon>
            </button> 
            <button [disabled]="!order.stops" (click)="createTrip(order)" *ngIf="ordersProvider.stateName(order.state) == ordersProvider.states[2]"mat-raised-button color="accent">Enviar</button>
            <button (click)="pickOrder(order)" *ngIf="ordersProvider.stateName(order.state) == ordersProvider.states[2] && !order.stops"mat-raised-button color="accent">
                <mat-icon>refresh</mat-icon>
            </button>


            <button *ngIf="ordersProvider.stateName(order.state) == ordersProvider.states[0] " (click)="showItems(order.number)" style="margin-left:16px" mat-mini-fab color="primary" aria-label="Example icon button with a menu icon">
                <mat-icon>receipt_long</mat-icon>
            </button> 
        </td>
    </ng-container>

    <ng-container [matColumnDef]="'cabify_estimated'">
        <th mat-header-cell *matHeaderCellDef> Estimaciones </th>
        <td mat-cell *matCellDef="let order" > 
            <div style="display: flex;align-items: center;">
                <span *ngIf="order.cabifyEstimated">{{(order.cabifyEstimated[0].distance / 1000).toFixed(1) }} Km</span> 
            </div>
        </td>
    </ng-container>

    <ng-container [matColumnDef]="'completed_at'">
        <th mat-header-cell *matHeaderCellDef> Hora del pedido </th>
        <td mat-cell *matCellDef="let order" > {{order.completed_at | date:'dd/MM HH:mm:ss'}} </td>
    </ng-container>

    <ng-container [matColumnDef]="'state'">
        <th mat-header-cell *matHeaderCellDef> Hora del pedido </th>
        <td mat-cell *matCellDef="let order" > 
            <img *ngIf="order.uberTrips" style="height: 1.5em;width: auto;margin: 0 1em 0 0;" src="assets/images/uber.png">
            <span class="status-chip status-chip-{{order.uberTrips[0].status}}" *ngIf="order.uberTrips">{{order.uberTrips[0].status | uberStatus }}</span>
        </td>
    </ng-container>

    <ng-container *ngFor="let def of commonColumns" [matColumnDef]="def">
        <th mat-header-cell *matHeaderCellDef> {{def}} </th>
        <td mat-cell *matCellDef="let order" > {{order[def]}} </td>
    </ng-container>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
  </table>