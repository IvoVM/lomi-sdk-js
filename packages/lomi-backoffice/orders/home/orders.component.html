<mat-drawer-container class="example-container" autosize>

    <mat-drawer #drawer opened class="actions-sidenav" mode="side" style="width:300px" position="end">
                <lomii-filters-side></lomii-filters-side>
    </mat-drawer>


    <div class="example-sidenav-content p" *ngIf="ordersProvider.orders">
        <div style="display:flex;flex-direction: row;align-items: flex-end;justify-content: space-between;margin: 1em 0;">
            <h1>Pedidos</h1>
            <div class="filters" style="width: 100%;margin: 0 1em;">
                <div style="width: 80%;display: flex;">
                    <div style="margin-top:0.5em">
                        <button style="margin-right: 1em;" mat-raised-button (click)="drawer.toggle()" color="accent">Filtros</button>
                    </div>
                    <mat-form-field>
                        <mat-label>Buscar por: </mat-label>
                        <input matInput>
                    </mat-form-field>
                </div>
            </div>
            <div class="actions" style="display: flex;flex-direction: row;margin-bottom: 1em;">
                <button style="margin-right: 1em;" mat-stroked-button color="accent">Activar alerta</button>
                <button mat-raised-button color="accent">Nuevo pedido</button>
            </div>
        </div>

        <div class="half-card shadow" style="padding: 0.5em 1em;">
         
            <mat-tab-group id="orders-tabs" [(selectedIndex)]="ordersProvider.currentStep" mat-align-tabs="start">
                <mat-tab *ngFor="let state of ordersProvider.states;let i = index" label="{{state}}">
                    <ng-template mat-tab-label>
                        
                        <span *ngIf="!records[state]">{{state}}</span>
                        <span matBadge="{{records[state]}}" matBadgeColor="accent" *ngIf="records[state]">{{state}}</span>
                    </ng-template>
                    <ng-container  *ngIf="!ordersProvider.loadingOrders">
                        <lomii-table (recordsFetched)="records[state] = $event" [state]="i"></lomii-table>
                    </ng-container>
                    <div *ngIf="ordersProvider.loadingOrders" style="width: 100%;height: 20em;display: flex;align-items: center;justify-content: center;flex-direction: column;">
                        <h1>Cargando ordenes...</h1>
                        <mat-spinner></mat-spinner>
                    </div>
                </mat-tab>
              </mat-tab-group>
        </div>
    </div>

</mat-drawer-container>